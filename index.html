<!DOCTYPE html>
<html>
  <head>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Graph Vizualization</title>
    <script
    src="https://code.jquery.com/jquery-3.5.1.min.js"
    integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0="
    crossorigin="anonymous"></script>

    <script type="text/javascript" src="https://unpkg.com/vis-network/standalone/umd/vis-network.min.js"></script>

    <link rel="stylesheet" type="text/css"  href="style.css" >
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500&display=swap" rel="stylesheet">
  </head>

  <header>
    
    <span>Graph Vizualization</span>
    <p style="white-space: pre-line">You can vizualize graph via adjency matrix.
      By settings, it would be undirected <em>multigraph</em>. It allows loops and verteciec w/o connections,
       also might be a null graph.The maximum number of vertices was hardcoded by my and equal to 10 due to some problems with responsiveness issues(actually because my frontend skills sucks).
    </p>
    
  </header>
  
  <body>
    
    <div class = "interface">
      <button class="add_btn">Add Vertex</button><label for="add_btn" id="overflow">Max</label>
      <hr>      
      <form class ="matrix">
        
        
      </form>
      
    </div>
    
    <div id = "viz" >
    </div>
    
  </body>
  <script type = "text/javascript">
        // настр для vis.js
        var nodes = new vis.DataSet();
        var edges = new vis.DataSet();
        var container = document.getElementById("viz");
        var data = {nodes: nodes, edges:edges};

            //настройки для отображения графа
        var options = {
            width:"100%",
            interaction:{hover:true},
            nodes:{
                shape:'circle', 
                color:{background:'#A63333',highlight:"#A63333", hover:{background:'#730220'}},
                borderWidth: 0, borderWidthSelected: 4, font:{size:20 , color:"#D9BD9C", }, margin:10
            },
            edges:{
                color: "#AFBFAA"
            },
            physics: {
                forceAtlas2Based: {
                  gravitationalConstant: -46,
                  centralGravity: 0.01,
                  springLength: 130,
                  springConstant: 0.05,
                  damping:0.5,
                },
                maxVelocity: 100,
                solver: "forceAtlas2Based",
                timestep: 0.5,
                stabilization: {updateInterval:100,iterations: 5000 },
              },
              autoResize: true,
        };

        var network = new vis.Network(container, data, options);
        

        //Функция, которая вызывается при изменении поля инпут
        function onch(id,value){      // id = 20  excp = 02 ----     21
          
            id1 = parseInt(id[0], 10);
            id2 = parseInt(id[1], 10);
          
          //количество ребер соединенных с вершино id  
          len = network.getConnectedEdges((id1+1)).length; 

          // если вводим значение больше нуля
          if (value > 0){
            for(var i=1;i<=value; i++){
              var id_of_edge = ""+id+""+i;  //создаем id для ребра
              if (!edges.get(id_of_edge)){  // проверяем, нет ли уже такого ребра
                edges.add([{id:id_of_edge,from:id1+1, to:id2+1}]);
              }
              else if (len > value){        // если введенное число меньше, чем количество
                for(var j=value;j <=len+1;j++){ // уже существующих ребер 
                  var i_to_remove = ""+id+""+j; // то удаляем их
                  data.edges.remove([i_to_remove]);
                };
              };          
            }
            $('#'+id2+''+id1).val(value); // выставляем в симметричной ячейке такое же значение
          //тут обрабатываем случай, когда ввели ноль или все затерли(что-то по сути тоже самое)
          }else if (value == 0 || value == ""){
            $("#"+id2+""+id1).val("");
            for(var i=1; i <=len; i++){
              var i_to_remove = ""+id+""+i;
              data.edges.remove([i_to_remove]);
            };
            $("#"+id).val("");
          };
          
          if ($("#"+id).val()>0){
            $("#"+id).css({"background":"#A63333", "color":"white"});
            $('#'+id2+''+id1).css({"background":"#A63333","color":"white"});
          };
          if ($("#"+id).val() == 0){
            $("#"+id).css({"background":"#8C8881", "color":"#A63333"});
            $('#'+id2+''+id1).css({"background":"#8C8881","color":"#A63333"});
          };

        };
  </script>
  <script type ="text/javascript" src="logic.js"></script>
</html>